"use strict";(self.webpackChunkgreenfield_docs=self.webpackChunkgreenfield_docs||[]).push([[9625],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=l,m=d["".concat(o,".").concat(h)]||d[h]||p[h]||r;return n?a.createElement(m,s(s({ref:t},u),{},{components:n})):a.createElement(m,s({ref:t},u))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,s=new Array(r);s[0]=h;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[d]="string"==typeof e?e:l,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),l=n(86010);const r={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(r.tabItem,s),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(87462),l=n(67294),r=n(86010),s=n(72389),i=n(67392),o=n(7094),c=n(12466);const u={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function d(e){const{lazy:t,block:n,defaultValue:s,values:d,groupId:p,className:h}=e,m=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=d??m.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),b=(0,i.l)(g,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===s?s:s??m.find((e=>e.props.default))?.props.value??m[0].props.value;if(null!==k&&!g.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:y}=(0,o.U)(),[v,N]=(0,l.useState)(k),_=[],{blockElementScrollPositionUntilNextRender:w}=(0,c.o5)();if(null!=p){const e=f[p];null!=e&&e!==v&&g.some((t=>t.value===e))&&N(e)}const C=e=>{const t=e.currentTarget,n=_.indexOf(t),a=g[n].value;a!==v&&(w(t),N(a),null!=p&&y(p,String(a)))},x=e=>{let t=null;switch(e.key){case"Enter":C(e);break;case"ArrowRight":{const n=_.indexOf(e.currentTarget)+1;t=_[n]??_[0];break}case"ArrowLeft":{const n=_.indexOf(e.currentTarget)-1;t=_[n]??_[_.length-1];break}}t?.focus()};return l.createElement("div",{className:(0,r.Z)("tabs-container",u.tabList)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},h)},g.map((e=>{let{value:t,label:n,attributes:s}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>_.push(e),onKeyDown:x,onClick:C},s,{className:(0,r.Z)("tabs__item",u.tabItem,s?.className,{"tabs__item--active":v===t})}),n??t)}))),t?(0,l.cloneElement)(m.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},m.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function p(e){const t=(0,s.Z)();return l.createElement(d,(0,a.Z)({key:String(t)},e))}},73829:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var a=n(87462),l=(n(67294),n(3905)),r=n(65488),s=n(85162);const i={title:"Challenge",order:9},o="Challenge",c={unversionedId:"api/blockchain-cli/challenge",id:"api/blockchain-cli/challenge",title:"Challenge",description:"Abstract",source:"@site/docs/api/blockchain-cli/challenge.md",sourceDirName:"api/blockchain-cli",slug:"/api/blockchain-cli/challenge",permalink:"/greenfield-docs/docs/api/blockchain-cli/challenge",draft:!1,editUrl:"https://github.com/bnb-chain/greenfield-docs/blob/main/docs/api/blockchain-cli/challenge.md",tags:[],version:"current",frontMatter:{title:"Challenge",order:9},sidebar:"apiReferenceSidebar",previous:{title:"Validator Staking",permalink:"/greenfield-docs/docs/api/blockchain-cli/validator-staking"},next:{title:"Blockchain API",permalink:"/greenfield-docs/docs/api/blockchain-rest"}},u={},d=[{value:"Abstract",id:"abstract",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Submit a Challenge",id:"submit-a-challenge",level:3},{value:"Detailed CLI",id:"detailed-cli",level:2},{value:"Query",id:"query",level:3},{value:"params",id:"params",level:4},{value:"latest-attested-challenges",id:"latest-attested-challenges",level:4},{value:"attested-challenge",id:"attested-challenge",level:4},{value:"inturn-attestation-submitter",id:"inturn-attestation-submitter",level:4},{value:"Transactions",id:"transactions",level:3},{value:"submit",id:"submit",level:4}],p={toc:d},h="wrapper";function m(e){let{components:t,...n}=e;return(0,l.kt)(h,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"challenge"},"Challenge"),(0,l.kt)("h2",{id:"abstract"},"Abstract"),(0,l.kt)("p",null,"The challenge module is responsible for handling on-chain challenges that are either generated or submitted by users."),(0,l.kt)("p",null,"Users can submit a challenge and query the latest attested challenges through cli commands."),(0,l.kt)("h2",{id:"quick-start"},"Quick Start"),(0,l.kt)("h3",{id:"submit-a-challenge"},"Submit a Challenge"),(0,l.kt)("p",null,"When you find your stored object is tampered or missing, you can submit a challenge by the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"gnfd tx challenge submit ${sp-operator-address} ${bucket-name} ${object-name} ${random-index} ${segment-index} --from ${key} --node ${node} -y\n")),(0,l.kt)("p",null,"${key} is the name of local key."),(0,l.kt)("p",null,"${bucket-name} and ${object-name} specify which object you want to submit challenge for."),(0,l.kt)("p",null,"${random-index} ${segment-index} specify which segment of the object you want to submit challenge for. If you do not know the index, you can set ${random-index} to ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,l.kt)("p",null,"${node} is the rpc address of a Greenfield node."),(0,l.kt)(r.Z,{defaultValue:"mainnet",values:[{label:"Mainnet",value:"mainnet"},{label:"Testnet",value:"testnet"}],mdxType:"Tabs"},(0,l.kt)(s.Z,{value:"mainnet",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'node = "https://greenfield-chain.bnbchain.org:443"\n'))),(0,l.kt)(s.Z,{value:"testnet",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'node = "https://gnfd-testnet-fullnode-tendermint-us.bnbchain.org:443"\n')))),(0,l.kt)("h2",{id:"detailed-cli"},"Detailed CLI"),(0,l.kt)("p",null,"A user can query and interact with the ",(0,l.kt)("inlineCode",{parentName:"p"},"challenge")," module using the CLI."),(0,l.kt)("h3",{id:"query"},"Query"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"query")," commands allow users to query ",(0,l.kt)("inlineCode",{parentName:"p"},"challenge")," state."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge --help\n")),(0,l.kt)("h4",{id:"params"},"params"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"params")," command allows users to query the current settings for the ",(0,l.kt)("inlineCode",{parentName:"p"},"challenge")," module."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge params [flags] \n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge params --node https://greenfield-chain.bnbchain.org:443\n")),(0,l.kt)("p",null,"Example Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},'params:\n  attestation_inturn_interval: "600"\n  attestation_kept_count: "300"\n  challenge_count_per_block: "1"\n  challenge_keep_alive_period: "300"\n  heartbeat_interval: "200"\n  reward_submitter_ratio: "0.001000000000000000"\n  reward_submitter_threshold: "1000000000000000"\n  reward_validator_ratio: "0.900000000000000000"\n  slash_amount_max: "100000000000000000"\n  slash_amount_min: "10000000000000000"\n  slash_amount_size_rate: "0.008500000000000000"\n  slash_cooling_off_period: "300"\n  sp_slash_counting_window: "43200"\n  sp_slash_max_amount: "500000000000000000"\n')),(0,l.kt)("h4",{id:"latest-attested-challenges"},"latest-attested-challenges"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"latest-attested-challenges")," command allows users to query the latest challenges that have been attested by validators."),(0,l.kt)("p",null,"Be noted, only the latest ",(0,l.kt)("inlineCode",{parentName:"p"},"attestation_kept_count")," challenges will be returned."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge latest-attested-challenges [flags]\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge latest-attested-challenges --node https://greenfield-chain.bnbchain.org:443\n")),(0,l.kt)("p",null,"Example Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},' - id: "400"\n   result: CHALLENGE_FAILED\n - id: "461"\n   result: CHALLENGE_SUCCEED\n')),(0,l.kt)("h4",{id:"attested-challenge"},"attested-challenge"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"attested-challenge")," command allows users to query a specific challenge that have been attested by validators."),(0,l.kt)("p",null,"Be noted, for the challenge results will be pruned, only the challenge within the latest ",(0,l.kt)("inlineCode",{parentName:"p"},"attestation_kept_count"),"\nchallenges will be used to serve this query."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge attested-challenge [id] [flags]\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge attested-challenge 1 --node https://greenfield-chain.bnbchain.org:443\n")),(0,l.kt)("p",null,"Example Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},' - id: "400"\n   result: CHALLENGE_FAILED\n')),(0,l.kt)("h4",{id:"inturn-attestation-submitter"},"inturn-attestation-submitter"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"inturn-attestation-submitter")," command allows users to query the off-chain challenger service that is currently in charge of attesting.   "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge inturn-attestation-submitter [flags]\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd query challenge inturn-attestation-submitter --node https://greenfield-chain.bnbchain.org:443\n")),(0,l.kt)("p",null,"Example Output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},'bls_pub_key: 828e81c5c39..\nsubmit_interval:\n  end: "1681960490"\n  start: "1681960480"\n')),(0,l.kt)("h3",{id:"transactions"},"Transactions"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"tx")," commands allow users to interact with the ",(0,l.kt)("inlineCode",{parentName:"p"},"challenge")," module."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd tx challenge [command] --help\n")),(0,l.kt)("h4",{id:"submit"},"submit"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"submit")," command allows users to submit a challenge for an object stored by any storage provider."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd tx challenge submit [sp-operator-address] [bucket-name] [object-name] [random-index] [segment-index] [flags]\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"gnfd tx challenge submit 0x950E2FBD285BC42E30EA69A8C1AB17EEDC70C447 ch69bd3t tq true 0 --node https://greenfield-chain.bnbchain.org:443 --from alice\n")),(0,l.kt)("p",null,"After the tx submitted, you can find the challenge id in ",(0,l.kt)("inlineCode",{parentName:"p"},"greenfield.challenge.EventStartChallenge")," event by accessing ",(0,l.kt)("a",{parentName:"p",href:"https://greenfield-chain.bnbchain.org:443/tx?hash=0x_prefixed_tx_hash"},"https://greenfield-chain.bnbchain.org:443/tx?hash=0x_prefixed_tx_hash"),"."),(0,l.kt)("p",null,"Usually the challenge will be handled within minutes, and the result of the challenge can be queried using the following command.\nHowever, be noted, the result is not kept forever, and only the latest ",(0,l.kt)("inlineCode",{parentName:"p"},"attestation_kept_count")," challenge results will be kept."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"gnfd query challenge latest-attested-challenges --node https://greenfield-chain.bnbchain.org:443 \n")),(0,l.kt)("p",null,"The result of the challenge can be queried by the above query commands, or using the the ",(0,l.kt)("inlineCode",{parentName:"p"},"AttestedChallenge"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"LatestAttestedChallenges")," methods through ",(0,l.kt)("a",{parentName:"p",href:"https://greenfield-chain.bnbchain.org/openapi"},"GRPC swagger"),"."))}m.isMDXComponent=!0}}]);