"use strict";(self.webpackChunkgreenfield_docs=self.webpackChunkgreenfield_docs||[]).push([[9018],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>f});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=l(r),m=a,f=u["".concat(c,".").concat(m)]||u[m]||p[m]||s;return r?n.createElement(f,o(o({ref:t},d),{},{components:r})):n.createElement(f,o({ref:t},d))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=r[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},71091:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var n=r(87462),a=(r(67294),r(3905));const s={title:"Metadata"},o="Metadata",i={unversionedId:"guide/storage-provider/modules/metadata",id:"guide/storage-provider/modules/metadata",title:"Metadata",description:"Metadata service is to supply better query service for the Greenfield network. Users can interact with SP for some complex query services.",source:"@site/docs/guide/storage-provider/modules/metadata.md",sourceDirName:"guide/storage-provider/modules",slug:"/guide/storage-provider/modules/metadata",permalink:"/greenfield-docs/docs/guide/storage-provider/modules/metadata",draft:!1,editUrl:"https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/storage-provider/modules/metadata.md",tags:[],version:"current",frontMatter:{title:"Metadata"},sidebar:"guideSidebar",previous:{title:"Receiver",permalink:"/greenfield-docs/docs/guide/storage-provider/modules/receiver"},next:{title:"Block Syncer",permalink:"/greenfield-docs/docs/guide/storage-provider/modules/blocksyncer"}},c={},l=[{value:"Role",id:"role",level:2},{value:"Scalability",id:"scalability",level:2},{value:"Key Workflow",id:"key-workflow",level:2},{value:"Get User&#39;s Own Buckets",id:"get-users-own-buckets",level:3},{value:"Message",id:"message",level:2},{value:"List Object By Bucket Name",id:"list-object-by-bucket-name",level:3},{value:"Message",id:"message-1",level:2}],d={toc:l},u="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"metadata"},"Metadata"),(0,a.kt)("p",null,"Metadata service is to supply better query service for the Greenfield network. Users can interact with SP for some complex query services.\nSome interfaces can be costly to implement on the chain or can cause significant latency.\nMetadata service is designed to implement the corresponding interface under the chain and provide it to the SP to achieve high performance and low latency.\nThe events' data are optimally stored by the block syncer and provided to the metadata.\nAlso, it provides additional extensions such as Pagination, Sort Key, and filtering. etc."),(0,a.kt)("h2",{id:"role"},"Role"),(0,a.kt)("p",null,"Sync all the Greenfield chain data to the distributed stores, and offers the read RPC\nrequests for chain data(in addition to payload). SP service will query the info, E.g.\npermission, ListBucket, ListObject, etc. It will reduce the pressure on the Greenfield chain."),(0,a.kt)("h2",{id:"scalability"},"Scalability"),(0,a.kt)("p",null,"At present, the main role of metadata is to provide better scalability, and two main points are considered in the process of interface development:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"the creation of interfaces that are not currently supported on the chain"),(0,a.kt)("li",{parentName:"ol"},"metadata can provide better performance and low latency interfaces compared to those on the chain")),(0,a.kt)("h2",{id:"key-workflow"},"Key Workflow"),(0,a.kt)("h3",{id:"get-users-own-buckets"},"Get User's Own Buckets"),(0,a.kt)("p",null,"Metadata service Receives the GetUserBucketsRequest request from the Gateway that has been authenticated. The service\nconverts the data format inside BSDB to the response type of the corresponding interface, and\nreturns GetUserBucketsResponse, which retrieves all bucket information from the BS DB."),(0,a.kt)("h2",{id:"message"},"Message"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-protobuf"},"// GetUserBucketsRequest is request type for the GetUserBuckets RPC method.\nmessage GetUserBucketsRequest {\n  // account_id is the account address of user\n  string account_id = 1;\n}\n// GetUserBucketsResponse is response type for the GetUserBuckets RPC method.\nmessage GetUserBucketsResponse {\n  // buckets defines the list of bucket\n  repeated Bucket buckets = 1;\n}\n")),(0,a.kt)("h3",{id:"list-object-by-bucket-name"},"List Object By Bucket Name"),(0,a.kt)("p",null,"Metadata Service receives the ListObjectsByBucketNameRequest request from Gateway that has been authenticated.\nThe service converts the data format inside BSDB to the response type of the corresponding interface, and\nreturns ListObjectsByBucketNameResponse, which retrieves all object information related to the bucket from the BS DB."),(0,a.kt)("h2",{id:"message-1"},"Message"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-protobuf"},"// ListObjectsByBucketNameRequest is request type for the ListObjectsByBucketName RPC method\nmessage ListObjectsByBucketNameRequest {\n  // bucket_name is the name of the bucket\n  string bucket_name = 1;\n  // account_id is the account address of user\n  string account_id = 2;\n}\n// ListObjectsByBucketNameResponse is response type for the ListObjectsByBucketName RPC method.\nmessage ListObjectsByBucketNameResponse {\n  // objects defines the list of object\n  repeated Object objects = 1;\n}\n")))}p.isMDXComponent=!0}}]);